From e1b7510f228260b7cf6a24ed3fd27bea9645a0bf Mon Sep 17 00:00:00 2001
From: Christopher Degawa <ccom@randomderp.com>
Date: Tue, 8 Jun 2021 23:06:28 -0500
Subject: [PATCH 07/11] CMake: use import libraries if possible for vwebp

Signed-off-by: Christopher Degawa <ccom@randomderp.com>
Change-Id: Ic946630111144844a96bdbf762cc511bdf89391e
---
 CMakeLists.txt | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6fd63cb4..32f24085 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -521,16 +521,21 @@ if(WEBP_BUILD_VWEBP)
   if(GLUT_FOUND)
     parse_makefile_am(${CMAKE_CURRENT_SOURCE_DIR}/examples "VWEBP_SRCS" "vwebp")
     add_executable(vwebp ${VWEBP_SRCS})
+    if(TARGET OpenGL::GL)
+      set(WEBP_OPENGL_LIBRARIES OpenGL::GL)
+    else()
+      set(WEBP_OPENGL_LIBRARIES ${OPENGL_LIBRARIES})
+    endif()
+
     target_link_libraries(vwebp
-                          ${OPENGL_LIBRARIES}
+                          ${WEBP_OPENGL_LIBRARIES}
                           exampleutil
-                          ${GLUT_glut_LIBRARY}
+                          GLUT::GLUT
                           imageioutil
                           webp
                           webpdemux)
     target_include_directories(vwebp
-                               PRIVATE ${GLUT_INCLUDE_DIR}
-                                       ${CMAKE_CURRENT_BINARY_DIR}/src
+                               PRIVATE ${CMAKE_CURRENT_BINARY_DIR}/src
                                        ${OPENGL_INCLUDE_DIR}
                                        ${WEBP_DEP_IMG_INCLUDE_DIRS})
     install(TARGETS vwebp RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})
-- 
2.31.1

